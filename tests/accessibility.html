<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mico CSS Framework - Accessibility Test</title>
  <link rel="stylesheet" href="../dist/css/mico.css">
  <style>
    .test-section {
      margin: 2rem 0;
      padding: 1rem;
      border: 1px solid #ddd;
    }
    .test-section h2 {
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <!-- Skip to main content link for keyboard users -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <header>
    <h1>Mico CSS Framework - Accessibility Test</h1>
    <p>This page tests accessibility features of the framework.</p>
    
    <nav aria-label="Main Navigation">
      <ul class="nav__list">
        <li class="nav__item"><a href="#" class="nav__link">Home</a></li>
        <li class="nav__item"><a href="#" class="nav__link">About</a></li>
        <li class="nav__item"><a href="#" class="nav__link">Services</a></li>
        <li class="nav__item"><a href="#" class="nav__link">Contact</a></li>
      </ul>
    </nav>
  </header>

  <main id="main-content">
    <!-- Keyboard Navigation Test -->
    <section class="test-section">
      <h2>Keyboard Navigation</h2>
      <p>Test keyboard navigation through these elements:</p>
      <div>
        <button class="btn">Button 1</button>
        <button class="btn btn-primary">Button 2</button>
        <a href="#" class="btn">Link Button</a>
        <input type="text" placeholder="Text input">
        <select>
          <option>Option 1</option>
          <option>Option 2</option>
          <option>Option 3</option>
        </select>
      </div>
    </section>

    <!-- Focus States Test -->
    <section class="test-section">
      <h2>Focus States</h2>
      <p>Test focus states on these elements:</p>
      <div>
        <button class="btn">Default Button</button>
        <button class="btn btn-primary">Primary Button</button>
        <a href="#" class="btn">Link Button</a>
        <a href="#">Regular Link</a>
        <input type="text" placeholder="Text input">
      </div>
    </section>

    <!-- Color Contrast Test -->
    <section class="test-section">
      <h2>Color Contrast</h2>
      <div class="bg-primary" style="padding: 1rem;">
        <p class="text-white">White text on primary background</p>
        <p class="text-black">Black text on primary background</p>
      </div>
      <div class="bg-secondary" style="padding: 1rem; margin-top: 1rem;">
        <p class="text-white">White text on secondary background</p>
        <p class="text-black">Black text on secondary background</p>
      </div>
      <div class="bg-accent" style="padding: 1rem; margin-top: 1rem;">
        <p class="text-white">White text on accent background</p>
        <p class="text-black">Black text on accent background</p>
      </div>
    </section>

    <!-- ARIA Roles Test -->
    <section class="test-section">
      <h2>ARIA Roles and Properties</h2>
      
      <div role="tablist">
        <button id="tab1" role="tab" aria-selected="true" aria-controls="panel1">Tab 1</button>
        <button id="tab2" role="tab" aria-selected="false" aria-controls="panel2">Tab 2</button>
      </div>
      
      <div id="panel1" role="tabpanel" aria-labelledby="tab1">
        <p>Content for Tab 1</p>
      </div>
      
      <div id="panel2" role="tabpanel" aria-labelledby="tab2" hidden>
        <p>Content for Tab 2</p>
      </div>
      
      <div>
        <button aria-expanded="false" aria-controls="expandable-content">Toggle Content</button>
        <div id="expandable-content" hidden>
          <p>This content can be expanded and collapsed.</p>
        </div>
      </div>
    </section>

    <!-- Form Accessibility Test -->
    <section class="test-section">
      <h2>Form Accessibility</h2>
      <form>
        <div>
          <label for="name-a11y">Name:</label>
          <input type="text" id="name-a11y" placeholder="Enter your name" aria-required="true">
        </div>
        
        <div>
          <label for="email-a11y">Email:</label>
          <input type="email" id="email-a11y" placeholder="Enter your email" aria-required="true">
          <div id="email-error" class="error" aria-live="polite"></div>
        </div>
        
        <fieldset>
          <legend>Preferences</legend>
          <div>
            <input type="checkbox" id="pref1" name="preferences">
            <label for="pref1">Option 1</label>
          </div>
          <div>
            <input type="checkbox" id="pref2" name="preferences">
            <label for="pref2">Option 2</label>
          </div>
        </fieldset>
        
        <div>
          <button type="submit" class="btn btn-primary">Submit</button>
        </div>
      </form>
    </section>

    <!-- Screen Reader Test -->
    <section class="test-section">
      <h2>Screen Reader Text</h2>
      
      <button class="btn">
        <span class="visually-hidden">Download</span>
        <svg aria-hidden="true" width="24" height="24" viewBox="0 0 24 24">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14v-4H8l4-4 4 4h-3v4h-2z"></path>
        </svg>
      </button>
      
      <a href="#">
        Read more
        <span class="visually-hidden">about our accessibility features</span>
      </a>
      
      <div>
        <span aria-hidden="true">★★★★☆</span>
        <span class="visually-hidden">4 out of 5 stars</span>
      </div>
    </section>

    <!-- High Contrast Mode Test -->
    <section class="test-section">
      <h2>High Contrast Mode</h2>
      <p>These elements should be visible in high contrast mode:</p>
      
      <button class="btn btn-primary">Primary Button</button>
      <button class="btn btn-outline">Outline Button</button>
      
      <div style="margin-top: 1rem; border: 1px solid; padding: 1rem;">
        <p>Content with border</p>
      </div>
      
      <div style="margin-top: 1rem;">
        <a href="#">Link in high contrast mode</a>
      </div>
    </section>

    <!-- Reduced Motion Test -->
    <section class="test-section">
      <h2>Reduced Motion</h2>
      <p>These animations should respect the reduced motion preference:</p>
      
      <button class="btn btn-primary animate-pulse">Animated Button</button>
      
      <div class="animate-fade-in" style="margin-top: 1rem; padding: 1rem; background: #eee;">
        <p>Fade-in content</p>
      </div>
      
      <div class="animate-slide-in" style="margin-top: 1rem; padding: 1rem; background: #eee;">
        <p>Slide-in content</p>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2024 Mico CSS Framework</p>
  </footer>

  <script>
    // Simple script to test accessibility features
    document.addEventListener('DOMContentLoaded', function() {
      // Tab functionality
      const tabs = document.querySelectorAll('[role="tab"]');
      const panels = document.querySelectorAll('[role="tabpanel"]');
      
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          // Deselect all tabs
          tabs.forEach(t => {
            t.setAttribute('aria-selected', 'false');
          });
          
          // Hide all panels
          panels.forEach(p => {
            p.hidden = true;
          });
          
          // Select clicked tab and show its panel
          tab.setAttribute('aria-selected', 'true');
          const panelId = tab.getAttribute('aria-controls');
          const panel = document.getElementById(panelId);
          panel.hidden = false;
        });
        
        tab.addEventListener('keydown', (e) => {
          // Handle arrow key navigation
          if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {
            e.preventDefault();
            const tabList = Array.from(tabs);
            const currentIndex = tabList.indexOf(tab);
            let newIndex;
            
            if (e.key === 'ArrowRight') {
              newIndex = (currentIndex + 1) % tabs.length;
            } else {
              newIndex = (currentIndex - 1 + tabs.length) % tabs.length;
            }
            
            tabList[newIndex].focus();
            tabList[newIndex].click();
          }
        });
      });
      
      // Toggle content
      const toggleButton = document.querySelector('[aria-expanded]');
      const expandableContent = document.getElementById('expandable-content');
      
      toggleButton.addEventListener('click', () => {
        const expanded = toggleButton.getAttribute('aria-expanded') === 'true';
        toggleButton.setAttribute('aria-expanded', !expanded);
        expandableContent.hidden = expanded;
      });
      
      // Form validation with accessible error messages
      const emailInput = document.getElementById('email-a11y');
      const emailError = document.getElementById('email-error');
      
      emailInput.addEventListener('blur', () => {
        if (emailInput.value && !emailInput.value.includes('@')) {
          emailError.textContent = 'Please enter a valid email address';
          emailInput.setAttribute('aria-invalid', 'true');
        } else {
          emailError.textContent = '';
          emailInput.removeAttribute('aria-invalid');
        }
      });
    });
  </script>
</body>
</html>
